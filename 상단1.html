<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ìƒí’ˆ ìƒì„¸ - YUSINSA</title>
<link href="https://fonts.googleapis.com/css2?family=Stylish&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet"/>
<style>
    :root {--primary:#222; --secondary:#666; --highlight:#d32f2f; --background:#fff; --border:#e0e0e0; --green-main: #2e7d32;}
    * {box-sizing: border-box;}
    body {margin: 0; font-family: 'Noto Sans KR', sans-serif; background-color: var(--background); color: var(--primary);}
    header {height: 64px; border-bottom: 10px solid #e6e6e6; background: var(--green-main); color: #fff; position: sticky; top: 0; z-index: 200; display: flex; align-items: center; padding: 0 20px; justify-content: space-between;}
    .left-area {display: flex; align-items: center; gap: 10px;}
    .left-area h1 {margin: 0; font-family: 'Stylish', sans-serif; font-size: 1.5em; cursor: pointer;}
    nav {position: absolute; left: 50%; transform: translateX(-50%); top: 0; height: 100%; display: flex; align-items: center;}
    nav ul {display: flex; gap: 100px; margin: 0; padding: 0; list-style: none;}
    nav a {color: #fff; text-decoration: none; font-weight: 700; font-size: 15px;}
    .right-space {display: flex; align-items: center; gap: 12px;}
    .header-btn {background: rgba(255, 255, 255, 0.15); color: #fff; padding: 6px 10px; border-radius: 6px; text-decoration: none; font-weight: 700; font-size: 14px;}
    .header-icon {color: #fff; font-size: 20px; text-decoration: none; padding: 4px;}

    /* === [ìˆ˜ì •ë¨] ë¡œê·¸ì¸ UI ìŠ¤íƒ€ì¼ (ì œëŒ€ë¡œ ëœ ìœ„ì¹˜) === */
    .user-welcome { display: flex; align-items: center; gap: 10px; font-weight: 600; font-size: 14px; color: #fff; }
    .user-welcome span { color: var(--light-green); }
    .user-welcome a { /* ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ */
      text-decoration: none;
      font-weight: 700;
      padding: 6px 10px;
      border-radius: 6px;
      
      background-color: #d32f2f; /* ê¹”ë”í•œ ë¹¨ê°„ìƒ‰ ë°°ê²½ */
      color: #fff; /* í°ìƒ‰ ê¸€ì”¨ */
      border: 1px solid #d32f2f; /* ë¹¨ê°„ìƒ‰ í…Œë‘ë¦¬ */

      transition: all 0.3s; 
      cursor: pointer; 
      font-size: 14px; 
    }
    .user-welcome a:hover { 
      background-color: #b71c1c; /* ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ë” ì§„í•œ ë¹¨ê°„ìƒ‰ */
      border-color: #b71c1c;
      color: #fff;
    }
    /* ============================================== */

    main {display: flex; flex-direction: column; align-items: center; padding: 80px 5%;}
    .product-detail-container {display: grid; grid-template-columns: 1fr 1fr; gap: 60px; max-width: 1200px; width: 100%;}
    .product-image-area {display: flex; flex-direction: column; gap: 20px;}
    .main-image {width: 100%;}
    .product-info-area {display: flex; flex-direction: column;}
    .product-info-area h2 {font-size: 2.8em; margin: 0; border-bottom: 1px solid var(--border); padding-bottom: 15px; font-weight: 500;}
    .product-info-area .subtitle {font-size: 1.1em; color: var(--secondary); margin-top: 5px; margin-bottom: 20px;}
    .price-group {border-top: 1px solid var(--border); padding-top: 15px;}
    .price-group .discount-rate {color: var(--highlight); font-weight: bold; font-size: 1.2em; margin-right: 10px;}
    .original-price {font-size: 1.2em; color: var(--secondary); text-decoration: line-through; margin-right: 10px;}
    .price {font-size: 1.8em; font-weight: bold; color: var(--primary);}
    .options {display: flex; flex-direction: column; gap: 15px; border-top: 1px solid var(--border); padding-top: 20px;}
    .option-group {display: flex; align-items: center; gap: 20px; padding: 10px 0;}
    .option-group label {font-weight: 700; min-width: 80px;}
    .option-group select {width: 100%; max-width: 250px; padding: 10px; border: 1px solid var(--border);}
    .quantity-selector {display: flex; align-items: center; max-width: 140px; border: 1px solid var(--border);}
    .quantity-selector button {background: none; border: none; width: 40px; height: 40px; font-size: 1.2em; cursor: pointer; color: var(--primary);}
    .quantity-selector input {text-align: center; border: none; flex-grow: 1; height: 40px; font-size: 1.1em; width: 50px; border-left: 1px solid var(--border); border-right: 1px solid var(--border);}
    .total-price {margin-top: 30px; font-size: 1.6em; font-weight: bold; text-align: right; border-top: 1px solid var(--border); padding-top: 20px;}
    .buttons {display: flex; gap: 10px; margin-top: 20px;}
    .buttons button {flex: 1; padding: 18px; border: none; font-size: 1.1em; font-weight: 700; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);}
    .buy-btn {background-color: var(--primary); color: var(--background);}
    .cart-btn {background-color: var(--secondary); color: var(--background);}
    .buy-btn:hover {transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); background-color: var(--green-main);}
    .cart-btn:hover {transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); background-color: #555;}
    .additional-info {margin-top: 30px; padding-top: 20px; border-top: 1px dashed var(--border); font-size: 0.9em; color: var(--secondary); line-height: 1.8;}
    .additional-info strong {color: var(--primary);}
    .product-description-extended {margin-top: 60px; max-width: 1200px; width: 100%; padding: 30px 0; border-top: 1px solid var(--border);}
    .product-description-extended h3 {font-size: 1.8em; border-bottom: 1px solid var(--border); padding-bottom: 10px; margin-bottom: 30px;}
    .product-description-extended .detail-section p {line-height: 1.8; color: var(--secondary); font-size: 1.1em; white-space: pre-wrap;}
    .product-description-extended .detail-section strong {font-size: 1.1em; color: var(--primary); display: block; margin-top: 20px; margin-bottom: 5px;}
    .product-description-extended .detail-section ul {list-style: none; padding-left: 1.5em; margin: 0;}
    .product-description-extended .detail-section li {line-height: 1.8; color: var(--secondary); font-size: 1.1em;}
    .product-description-extended .detail-section li::before {content: 'âœ“'; color: var(--green-main); font-weight: bold; display: inline-block; width: 1.5em; margin-left: -1.5em;}
    footer {background-color: var(--green-main); color: white; padding: 40px 20px; text-align: center; margin-top: 80px;}
    
    @media (max-width: 768px) {
        .product-detail-container {grid-template-columns: 1fr;}
        .product-info-area {margin-top: 20px;}
        /* === [ìˆ˜ì •ë¨] ëª¨ë°”ì¼ CSSì—ì„œëŠ” ë¡œê·¸ì¸ ìŠ¤íƒ€ì¼ ì œê±° (ë°–ìœ¼ë¡œ ì´ë™í–ˆìŒ) === */
    }
</style>
</head>
<body>
    <header>
        <div class="left-area" onclick="location.href='í™ˆí˜ì´ì§€.html'"><h1>YUSINSA</h1></div>
        <nav>
            <ul>
                <li><a href="outer.html">Outer</a></li><li><a href="jun.html">ìƒì˜</a></li><li><a href="hee.html">í•˜ì˜</a></li><li><a href="hyuk.html">ì•…ì„¸</a></li>
            </ul>
        </nav>
        <div class="right-space">
            <div id="loggedOutButtons" style="display: flex; gap: 12px;">
                <a href="#" class="header-btn">íšŒì›ê°€ì…</a>
                <a href="#" class="header-btn">ë¡œê·¸ì¸</a>
            </div>
            <div class="user-welcome" id="loggedInWelcome" style="display: none;">
                <span id="userNameDisplay"></span>
                <a id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</a>
            </div>
            <a href="cart.html" class="header-icon">ğŸ›’</a> <a href="#" class="header-icon">ğŸ”</a>
        </div>
    </header>

    <main>
        <section class="product-detail-container">
            <div class="product-image-area"><img id="main-product-image" class="main-image" src="" alt="ìƒí’ˆ ì´ë¯¸ì§€" /></div>
            <div class="product-info-area">
                <h2 id="product-name"></h2>
                <p id="product-subtitle" class="subtitle"></p>
                <div class="price-group">
                    <span id="discount-rate" class="discount-rate"></span>
                    <span id="original-price" class="original-price"></span>
                    <span id="discounted-price" class="price"></span>
                </div>
                <div class="options">
                    <div class="option-group">
                        <label for="size-select">ì‚¬ì´ì¦ˆ</label>
                        <select id="size-select"><option value="">ì˜µì…˜ ì„ íƒ</option><option value="S">S</option><option value="M">M</option><option value="L">L</option></select>
                    </div>
                    <div class="option-group">
                        <label for="color-select">ìƒ‰ìƒ</label>
                        <select id="color-select"><option value="">ì˜µì…˜ ì„ íƒ</option><option value="black">ë¸”ë™</option><option value="white">í™”ì´íŠ¸</option></select>
                    </div>
                    <div class="option-group">
                        <label for="quantity">ìˆ˜ëŸ‰</label>
                        <div class="quantity-selector">
                            <button id="minus-btn">-</button><input type="text" id="quantity-input" value="1" readonly /><button id="plus-btn">+</button>
                        </div>
                    </div>
                </div>
                <div class="total-price">ì´ ìƒí’ˆ ê¸ˆì•¡: â‚©<span id="final-price"></span></div>
                <div class="buttons">
                    <button class="buy-btn">êµ¬ë§¤í•˜ê¸°</button>
                    <button class="cart-btn" id="add-to-cart-btn">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
                </div>
                <div class="additional-info">
                    <p id="mileage-info"></p>
                    <p><strong>ë°°ì†¡:</strong> ì „êµ­ ë¬´ë£Œë°°ì†¡ (ì œì£¼/ë„ì„œì‚°ê°„ ì§€ì—­ ì¶”ê°€ ë¹„ìš© ë°œìƒ)</p>
                </div>
            </div>
        </section>
        <section class="product-description-extended">
            <h3>ìƒí’ˆ ìƒì„¸ ì •ë³´</h3>
            <div id="product-details-content" class="detail-section">
            </div>
        </section>
    </main>
    <footer class="footer"><p>&copy; 2025 YUSINSA. All rights reserved.</p></footer>

    <script>
    // === [ìˆ˜ì •ë¨] ì¥ë°”êµ¬ë‹ˆ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì¶”ê°€ ===
    function getCart() {
        return JSON.parse(localStorage.getItem('cartItems')) || [];
    }
    function saveCart(cart) {
        localStorage.setItem('cartItems', JSON.stringify(cart));
    }

    document.addEventListener('DOMContentLoaded', () => {
        setupLoginUI(); // ë¡œê·¸ì¸ UI ì„¤ì • í•¨ìˆ˜ í˜¸ì¶œ

        const productData = JSON.parse(localStorage.getItem('selectedProduct'));
        if (!productData) {
            document.querySelector('main').innerHTML = '<h1>ìƒí’ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</h1>';
            return;
        }

        let basePrice = productData.discountedPrice;

        // --- 1. ê³ ì •ëœ ì •ë³´ í˜ì´ì§€ì— ì±„ìš°ê¸° ---
        document.title = `${productData.name} - YUSINSA`;
        document.getElementById('main-product-image').src = productData.img;
        document.getElementById('main-product-image').alt = productData.name;
        document.getElementById('product-name').textContent = productData.name;
        document.getElementById('product-subtitle').textContent = productData.subtitle;
        document.getElementById('discount-rate').textContent = `${productData.discount}%`;
        document.getElementById('original-price').textContent = `â‚©${productData.originalPrice.toLocaleString()}`;
        document.getElementById('discounted-price').textContent = `â‚©${basePrice.toLocaleString()}`;
        document.getElementById('final-price').textContent = basePrice.toLocaleString();
        document.getElementById('mileage-info').innerHTML = `<strong>ë§ˆì¼ë¦¬ì§€:</strong> êµ¬ë§¤ì•¡ì˜ ${productData.mileageRate}% ì ë¦½`;
        
        // --- 2. ìƒì„¸ ì •ë³´ ì„¹ì…˜ ë™ì ìœ¼ë¡œ ìƒì„± ---
        const detailsContainer = document.getElementById('product-details-content');
        const details = productData.details;
        let detailsHTML = `<p>${details.intro}</p>`;
        
        if (details.checkpoints && details.checkpoints.length > 0) {
            detailsHTML += `<strong>Â· ë””ìì¸ íŠ¹ì§•</strong><ul>`;
            details.checkpoints.forEach(point => {
                detailsHTML += `<li>${point}</li>`;
            });
            detailsHTML += `</ul>`;
        }
        
        if (details.care) {
            detailsHTML += `<strong>Â· ì·¨ê¸‰ ì‹œ ì£¼ì˜ì‚¬í•­</strong><p>${details.care.replace(/\n/g, '<br>')}</p>`;
        }
        detailsContainer.innerHTML = detailsHTML;

        // --- 3. ìˆ˜ëŸ‰ ë° ê°€ê²© ê³„ì‚° ê¸°ëŠ¥ ---
        const quantityInput = document.getElementById('quantity-input');
        const finalPriceSpan = document.getElementById('final-price');
        const updatePrice = () => {
            finalPriceSpan.textContent = (parseInt(quantityInput.value) * basePrice).toLocaleString();
        };
        document.getElementById('plus-btn').addEventListener('click', () => {
            quantityInput.value = parseInt(quantityInput.value) + 1;
            updatePrice();
        });
        document.getElementById('minus-btn').addEventListener('click', () => {
            if (parseInt(quantityInput.value) > 1) {
                quantityInput.value = parseInt(quantityInput.value) - 1;
                updatePrice();
            }
        });

        // === [ìˆ˜ì •ë¨] 4. ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸° ê¸°ëŠ¥ ===
        const cartBtn = document.getElementById('add-to-cart-btn');
        cartBtn.addEventListener('click', () => {
            // 4-1. ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
            if (localStorage.getItem('isLoggedIn') !== 'true') {
                alert('ì¥ë°”êµ¬ë‹ˆì— ë‹´ìœ¼ë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                // (ì°¸ê³ ) ë§Œì•½ í™ˆí˜ì´ì§€ì— ìˆë˜ ëª¨ë‹¬ì„ ë„ìš°ê³  ì‹¶ë‹¤ë©´,
                // ê·¸ ëª¨ë‹¬ HTML/CSS/JSë¥¼ ì´ íŒŒì¼ì—ë„ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.
                // ì§€ê¸ˆì€ ê°„ë‹¨í•˜ê²Œ alertë§Œ ë„ì›ë‹ˆë‹¤.
                return;
            }

            // 4-2. ì˜µì…˜ ì„ íƒ í™•ì¸
            const size = document.getElementById('size-select').value;
            const color = document.getElementById('color-select').value;
            const quantity = parseInt(quantityInput.value);

            if (!size || !color) {
                alert('ì‚¬ì´ì¦ˆì™€ ìƒ‰ìƒì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            // 4-3. ì¥ë°”êµ¬ë‹ˆì— ë‹´ì„ ì•„ì´í…œ ê°ì²´ ìƒì„±
            const cartItem = {
                cartId: Date.now(), // ì¥ë°”êµ¬ë‹ˆ ë‚´ì—ì„œ ê³ ìœ í•œ IDë¡œ ì‚¬ìš© (ì‚­ì œ ì‹œ í•„ìš”)
                id: productData.id,
                name: productData.name,
                img: productData.img,
                price: basePrice, // í• ì¸ëœ ê°€ê²©
                size: size,
                color: color,
                quantity: quantity
            };

            // 4-4. localStorageì— ì €ì¥
            let cart = getCart();
            cart.push(cartItem);
            saveCart(cart);

            // 4-5. í”¼ë“œë°±
            if (confirm('ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì„ ë‹´ì•˜ìŠµë‹ˆë‹¤. ì¥ë°”êµ¬ë‹ˆë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                window.location.href = 'cart.html';
            }
        });
    });

    // === [ìˆ˜ì •ë¨] 5. ë¡œê·¸ì¸ UI ë° ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ ===
    function setupLoginUI() {
        const loggedOutButtons = document.getElementById('loggedOutButtons');
        const loggedInWelcome = document.getElementById('loggedInWelcome');
        const userNameDisplay = document.getElementById('userNameDisplay');
        const logoutBtn = document.getElementById('logoutBtn');

        const isLoggedIn = localStorage.getItem('isLoggedIn');
        const storedName = localStorage.getItem('userName');

        if (isLoggedIn === 'true' && storedName) {
            loggedOutButtons.style.display = 'none';
            loggedInWelcome.style.display = 'flex';
            userNameDisplay.textContent = `${storedName}ë‹˜`;
        } else {
            loggedOutButtons.style.display = 'flex';
            loggedInWelcome.style.display = 'none';
        }

        if (logoutBtn) {
            logoutBtn.addEventListener('click', () => {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('userName');
                alert('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
                window.location.href = 'í™ˆí˜ì´ì§€.html'; // í™ˆìœ¼ë¡œ ì´ë™
            });
        }
        
        // (ì°¸ê³ ) ì´ í˜ì´ì§€ì—ëŠ” ë¡œê·¸ì¸/íšŒì›ê°€ì… ëª¨ë‹¬ì´ ì—†ìŠµë‹ˆë‹¤.
        // 'ë¡œê·¸ì¸' ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë¡œê·¸ì¸ ëª¨ë‹¬ì´ ìˆëŠ” í™ˆí˜ì´ì§€ë¡œ ì´ë™í•˜ê²Œ í•©ë‹ˆë‹¤.
        document.querySelector('#loggedOutButtons a[href="#"]').addEventListener('click', (e) => {
             e.preventDefault(); // ê¸°ë³¸ # ë™ì‘ ë°©ì§€
             alert('ë¡œê·¸ì¸ì„ ìœ„í•´ í™ˆí˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
             window.location.href = 'í™ˆí˜ì´ì§€.html'; // ëª¨ë‹¬ì´ ìˆëŠ” í˜ì´ì§€
        });
    }
    </script>
</body>
</html>